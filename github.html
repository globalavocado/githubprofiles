<!doctype html>
<html lang='en'>
  <head>
    <title>Github profiles</title>
    <link href='github.css' rel='stylesheet'>
    <meta charset='utf8'>
  </head>
  <body>
    <form id='add-profile'>
      <input id='username' placeholder='Enter a Github username'>
      <button type='submit'>Load profile</button>
    </form>

    <main class="profile-container">
    </main>
    <template id='profile-template'>
      <article class="profile">
        <section class="pic">
          <img src="{{avatar_url}}">
        </section>

        <section class="statistics">
          <h3>
            <a href="https://github.com/{{login}}">
              {{login}}
            </a>
          </h3>
          <strong>Repos: {{public_repos}}</strong>
          <strong>Followers: {{followers}}</strong>
        </section>
        <br clear="all">
      </article>
    </template>

    <script src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
    <script src='template_check.js'></script>
    <script src='mustache.js'></script>
    <script>
          $(document).ready(function(){
        $('#add-profile').on('submit', function(e){
          e.preventDefault();

        var url = 'https://api.github.com/users/' + $('#username').val();
        
        var userData = 
          $.get(url, function(user) { 
          $('<article class="profile"><section class="pic"><img src="' + user.avatar_url + '"></section><section class="statistics"><h3><a href="https://github.com/' + user.login + '">' + user.login + '</a></h3><strong>Repos: ' + user.public_repos + '</strong><strong>Followers: ' + user.followers + '</strong></section><br clear="all"></article>').appendTo('.profile-container');
          
          // error message when unknown user
          }).fail(function(){
            alert('Could not find this user.');
          // clears the input
          }).always(function(){
            $('#username').val('');
          })
        })
      })
    </script>
  
  </body>
</html>






